<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to build your inventory &mdash; Ansible Community Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5707b69d" />
      <link rel="stylesheet" type="text/css" href="../_static/css/ansible.css?v=c5b67dd2" />
      <link rel="stylesheet" type="text/css" href="../_static/antsibull-minimal.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/rtd-ethical-ads.css?v=289b023e" />

  
    <link rel="shortcut icon" href="../_static/images/Ansible-Mark-RGB_Black.png"/>
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c7b8e248"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working with dynamic inventory" href="intro_dynamic_inventory.html" />
    <link rel="prev" title="Building Ansible inventories" href="index.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->
<script src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="devel">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
    <li><a href="https://forum.ansible.com/" target="_blank">Ansible community forum</a></li>
    <li><a href="https://docs.ansible.com/" target="_blank">Documentation</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Ansible Community Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Ansible
          </a>
              <div class="version">
                devel
              </div><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <form class="version-dropdown" method="get">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/devel/") > -1
            ? "/devel/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <label class="sr-only" for="version-list">Select version:</label>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="9"
            
        >
            9
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            selected="selected"
        >
            devel
        </option>
        
      </select>
    </form>
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Ansible getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started with Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started_ee/index.html">Getting started with Execution Environments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Building Ansible inventories</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to build your inventory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inventory-basics-formats-hosts-and-groups">Inventory basics: formats, hosts, and groups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#default-groups">Default groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hosts-in-multiple-groups">Hosts in multiple groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grouping-groups-parent-child-group-relationships">Grouping groups: parent/child group relationships</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-ranges-of-hosts">Adding ranges of hosts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#passing-multiple-inventory-sources">Passing multiple inventory sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#organizing-inventory-in-a-directory">Organizing inventory in a directory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#managing-inventory-load-order">Managing inventory load order</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#adding-variables-to-inventory">Adding variables to inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assigning-a-variable-to-one-machine-host-variables">Assigning a variable to one machine: host variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inventory-aliases">Inventory aliases</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#defining-variables-in-ini-format">Defining variables in INI format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assigning-a-variable-to-many-machines-group-variables">Assigning a variable to many machines: group variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inheriting-variable-values-group-variables-for-groups-of-groups">Inheriting variable values: group variables for groups of groups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#organizing-host-and-group-variables">Organizing host and group variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-variables-are-merged">How variables are merged</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#managing-inventory-variable-load-order">Managing inventory variable load order</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-to-hosts-behavioral-inventory-parameters">Connecting to hosts: behavioral inventory parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#non-ssh-connection-types">Non-SSH connection types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#inventory-setup-examples">Inventory setup examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-one-inventory-per-environment">Example: One inventory per environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-group-by-function">Example: Group by function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-group-by-location">Example: Group by location</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="intro_dynamic_inventory.html">Working with dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_patterns.html">Patterns: targeting hosts and groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="connection_details.html">Connection methods and details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command_guide/index.html">Using Ansible command line tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../playbook_guide/index.html">Using Ansible playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vault_guide/index.html">Protecting sensitive data with Ansible vault</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_plugin_guide/index.html">Using Ansible modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections_guide/index.html">Using Ansible collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../os_guide/index.html">Using Ansible on Windows and BSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips_tricks/index.html">Ansible tips and tricks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions_collections.html">Ansible Collections Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions.html">ansible-core Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/advanced_index.html">Advanced Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/style_guide/index.html">Ansible documentation style guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Legacy Public Cloud Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html">Collection Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Automation Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_core_roadmap_index.html">ansible-core Roadmaps</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Building Ansible inventories</a></li>
      <li class="breadcrumb-item active">How to build your inventory</li>
  <li class="wy-breadcrumbs-aside">
            <!-- Remove main index page as it is no longer editable -->
            
              <a href="https://github.com/ansible/ansible-documentation/edit/devel/docs/docsite/rst/inventory_guide/intro_inventory.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
      var extra_banner = '';
    /*use extra_banner for when we want something extra, like a survey or Community Day notice */
   /*  var extra_banner =
      '<div id="latest_extra_banner_id" class="admonition important">' +
        '<p style="padding-bottom: 1.2rem;">' +
        'Discuss Ansible in the new <a href="https://forum.ansible.com/t/welcome-to-the-ansible-community/5">Ansible Forum!</a>' +
        '</p>' +
      '</div>';
      */
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/10/"])) {
        /* temp extra banner to advertise something */
        banner += extra_banner;

        msg += 'This is the <b>latest</b> (stable) Ansible community documentation. For Red Hat Ansible Automation Platform subscriptions, see <a href="https://access.redhat.com/support/policy/updates/ansible-automation-platform">Life Cycle</a> for version details.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp extra banner to advertise something */
        banner += extra_banner;

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
        /* temp extra banner to advertise something - this is for testing*/
        banner += extra_banner;

      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
             
  <section id="how-to-build-your-inventory">
<span id="inventory"></span><span id="intro-inventory"></span><h1>How to build your inventory<a class="headerlink" href="#how-to-build-your-inventory" title="Link to this heading"></a></h1>
<p>Ansible automates tasks on managed nodes or “hosts” in your infrastructure, using a list or group of lists known as inventory. You can pass host names at the command line, but most Ansible users create inventory files. Your inventory defines the managed nodes you automate, with groups so you can run automation tasks on multiple hosts at the same time.
Once your inventory is defined, you use <a class="reference internal" href="intro_patterns.html#intro-patterns"><span class="std std-ref">patterns</span></a> to select the hosts or groups you want Ansible to run against.</p>
<p>The simplest inventory is a single file with a list of hosts and groups. The default location for this file is <code class="docutils literal notranslate"><span class="pre">/etc/ansible/hosts</span></code>.
You can specify a different inventory file at the command line using the <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">&lt;path&gt;</span></code> option or in configuration using <code class="docutils literal notranslate"><span class="pre">inventory</span></code>.</p>
<p>Ansible <a class="reference internal" href="../plugins/inventory.html#inventory-plugins"><span class="std std-ref">Inventory plugins</span></a> supports a range of formats and sources to make your inventory flexible and customizable. As your inventory expands, you may need more than a single file to organize your hosts and groups. Here are three options beyond the <code class="docutils literal notranslate"><span class="pre">/etc/ansible/hosts</span></code> file:</p>
<ul class="simple">
<li><p>You can create a directory with multiple inventory files. See <a class="reference internal" href="#inventory-directory"><span class="std std-ref">Organizing inventory in a directory</span></a>. These can use different formats (YAML, ini, and so on).</p></li>
<li><p>You can pull inventory dynamically. For example, you can use a dynamic inventory plugin to list resources in one or more cloud providers. See <a class="reference internal" href="intro_dynamic_inventory.html#intro-dynamic-inventory"><span class="std std-ref">Working with dynamic inventory</span></a>.</p></li>
<li><p>You can use multiple sources for inventory, including both dynamic inventory and static files. See <a class="reference internal" href="#using-multiple-inventory-sources"><span class="std std-ref">Passing multiple inventory sources</span></a>.</p></li>
</ul>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#inventory-basics-formats-hosts-and-groups" id="id4">Inventory basics: formats, hosts, and groups</a></p>
<ul>
<li><p><a class="reference internal" href="#default-groups" id="id5">Default groups</a></p></li>
<li><p><a class="reference internal" href="#hosts-in-multiple-groups" id="id6">Hosts in multiple groups</a></p></li>
<li><p><a class="reference internal" href="#grouping-groups-parent-child-group-relationships" id="id7">Grouping groups: parent/child group relationships</a></p></li>
<li><p><a class="reference internal" href="#adding-ranges-of-hosts" id="id8">Adding ranges of hosts</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#passing-multiple-inventory-sources" id="id9">Passing multiple inventory sources</a></p></li>
<li><p><a class="reference internal" href="#organizing-inventory-in-a-directory" id="id10">Organizing inventory in a directory</a></p>
<ul>
<li><p><a class="reference internal" href="#managing-inventory-load-order" id="id11">Managing inventory load order</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adding-variables-to-inventory" id="id12">Adding variables to inventory</a></p></li>
<li><p><a class="reference internal" href="#assigning-a-variable-to-one-machine-host-variables" id="id13">Assigning a variable to one machine: host variables</a></p>
<ul>
<li><p><a class="reference internal" href="#inventory-aliases" id="id14">Inventory aliases</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#defining-variables-in-ini-format" id="id15">Defining variables in INI format</a></p></li>
<li><p><a class="reference internal" href="#assigning-a-variable-to-many-machines-group-variables" id="id16">Assigning a variable to many machines: group variables</a></p>
<ul>
<li><p><a class="reference internal" href="#inheriting-variable-values-group-variables-for-groups-of-groups" id="id17">Inheriting variable values: group variables for groups of groups</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#organizing-host-and-group-variables" id="id18">Organizing host and group variables</a></p></li>
<li><p><a class="reference internal" href="#how-variables-are-merged" id="id19">How variables are merged</a></p>
<ul>
<li><p><a class="reference internal" href="#managing-inventory-variable-load-order" id="id20">Managing inventory variable load order</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#connecting-to-hosts-behavioral-inventory-parameters" id="id21">Connecting to hosts: behavioral inventory parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#non-ssh-connection-types" id="id22">Non-SSH connection types</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inventory-setup-examples" id="id23">Inventory setup examples</a></p>
<ul>
<li><p><a class="reference internal" href="#example-one-inventory-per-environment" id="id24">Example: One inventory per environment</a></p></li>
<li><p><a class="reference internal" href="#example-group-by-function" id="id25">Example: Group by function</a></p></li>
<li><p><a class="reference internal" href="#example-group-by-location" id="id26">Example: Group by location</a></p></li>
</ul>
</li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following YAML snippets include an ellipsis to indicate they are part of a larger YAML file. You can find out more about YAML syntax at <a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#yaml-basics&quot;">YAML Basics</a>.</p>
</div>
<section id="inventory-basics-formats-hosts-and-groups">
<span id="inventoryformat"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink">Inventory basics: formats, hosts, and groups</a><a class="headerlink" href="#inventory-basics-formats-hosts-and-groups" title="Link to this heading"></a></h2>
<p>You can create your inventory file in one of many formats, depending on the inventory plugins you have.
The most common formats are INI and YAML. A basic INI <code class="docutils literal notranslate"><span class="pre">/etc/ansible/hosts</span></code> might look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mail.example.com

[webservers]
foo.example.com
bar.example.com

[dbservers]
one.example.com
two.example.com
three.example.com
</pre></div>
</div>
<p>The headings in brackets are group names, which are used in classifying hosts
and deciding what hosts you are controlling at what times and for what purpose.
Group names should follow the same guidelines as <a class="reference internal" href="../playbook_guide/playbooks_variables.html#valid-variable-names"><span class="std std-ref">Creating valid variable names</span></a>.</p>
<p>Here’s that same basic inventory file in YAML format:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ungrouped</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">mail.example.com</span><span class="p">:</span>
<span class="nt">webservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="nt">dbservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
</pre></div>
</div>
<section id="default-groups">
<span id="id1"></span><h3><a class="toc-backref" href="#id5" role="doc-backlink">Default groups</a><a class="headerlink" href="#default-groups" title="Link to this heading"></a></h3>
<p>Even if you do not define any groups in your inventory file, Ansible creates two default groups: <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">ungrouped</span></code>. The <code class="docutils literal notranslate"><span class="pre">all</span></code> group contains every host.
The <code class="docutils literal notranslate"><span class="pre">ungrouped</span></code> group contains all hosts that don’t have another group aside from <code class="docutils literal notranslate"><span class="pre">all</span></code>.
Every host will always belong to at least 2 groups (<code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">ungrouped</span></code> or <code class="docutils literal notranslate"><span class="pre">all</span></code> and some other group). For example, in the basic inventory above, the host <code class="docutils literal notranslate"><span class="pre">mail.example.com</span></code> belongs to the <code class="docutils literal notranslate"><span class="pre">all</span></code> group and the <code class="docutils literal notranslate"><span class="pre">ungrouped</span></code> group; the host <code class="docutils literal notranslate"><span class="pre">two.example.com</span></code> belongs to the <code class="docutils literal notranslate"><span class="pre">all</span></code> group and the <code class="docutils literal notranslate"><span class="pre">dbservers</span></code> group. Though <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">ungrouped</span></code> are always present, they can be implicit and not appear in group listings like <code class="docutils literal notranslate"><span class="pre">group_names</span></code>.</p>
</section>
<section id="hosts-in-multiple-groups">
<span id="host-multiple-groups"></span><h3><a class="toc-backref" href="#id6" role="doc-backlink">Hosts in multiple groups</a><a class="headerlink" href="#hosts-in-multiple-groups" title="Link to this heading"></a></h3>
<p>You can put each host in more than one group. For example, a production web server in a data center in Atlanta might be included in groups called <code class="docutils literal notranslate"><span class="pre">[prod]</span></code> and <code class="docutils literal notranslate"><span class="pre">[atlanta]</span></code> and <code class="docutils literal notranslate"><span class="pre">[webservers]</span></code>. You can create groups that track:</p>
<ul class="simple">
<li><p>What - An application, stack or microservice (for example, database servers, web servers, and so on).</p></li>
<li><p>Where - A datacenter or region, to talk to local DNS, storage, and so on (for example, east, west).</p></li>
<li><p>When - The development stage, to avoid testing on production resources (for example, prod, test).</p></li>
</ul>
<p>Extending the previous YAML inventory to include what, when, and where would look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ungrouped</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">mail.example.com</span><span class="p">:</span>
<span class="nt">webservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="nt">dbservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
<span class="nt">east</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="nt">west</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
<span class="nt">prod</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="nt">test</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
</pre></div>
</div>
<p>You can see that <code class="docutils literal notranslate"><span class="pre">one.example.com</span></code> exists in the <code class="docutils literal notranslate"><span class="pre">dbservers</span></code>, <code class="docutils literal notranslate"><span class="pre">east</span></code>, and <code class="docutils literal notranslate"><span class="pre">prod</span></code> groups.</p>
</section>
<section id="grouping-groups-parent-child-group-relationships">
<span id="child-groups"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">Grouping groups: parent/child group relationships</a><a class="headerlink" href="#grouping-groups-parent-child-group-relationships" title="Link to this heading"></a></h3>
<p>You can create parent/child relationships among groups. Parent groups are also known as nested groups or groups of groups. For example, if all your production hosts are already in groups such as  <code class="docutils literal notranslate"><span class="pre">atlanta_prod</span></code> and <code class="docutils literal notranslate"><span class="pre">denver_prod</span></code>, you can create a <code class="docutils literal notranslate"><span class="pre">production</span></code> group that includes those smaller groups. This approach reduces maintenance because you can add or remove hosts from the parent group by editing the child groups.</p>
<p>To create parent/child relationships for groups:</p>
<ul class="simple">
<li><p>in INI format, use the <code class="docutils literal notranslate"><span class="pre">:children</span></code> suffix</p></li>
<li><p>in YAML format, use the <code class="docutils literal notranslate"><span class="pre">children:</span></code> entry</p></li>
</ul>
<p>Here is the same inventory as shown above, simplified with parent groups for the <code class="docutils literal notranslate"><span class="pre">prod</span></code> and <code class="docutils literal notranslate"><span class="pre">test</span></code> groups. The two inventory files give you the same results:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ungrouped</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">mail.example.com</span><span class="p">:</span>
<span class="nt">webservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="nt">dbservers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
<span class="nt">east</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">foo.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">one.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">two.example.com</span><span class="p">:</span>
<span class="nt">west</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bar.example.com</span><span class="p">:</span>
<span class="w">    </span><span class="nt">three.example.com</span><span class="p">:</span>
<span class="nt">prod</span><span class="p">:</span>
<span class="w">  </span><span class="nt">children</span><span class="p">:</span>
<span class="w">    </span><span class="nt">east</span><span class="p">:</span>
<span class="nt">test</span><span class="p">:</span>
<span class="w">  </span><span class="nt">children</span><span class="p">:</span>
<span class="w">    </span><span class="nt">west</span><span class="p">:</span>
</pre></div>
</div>
<p>Child groups have a couple of properties to note:</p>
<ul class="simple">
<li><p>Any host that is a member of a child group is automatically a member of the parent group.</p></li>
<li><p>Groups can have multiple parents and children, but not circular relationships.</p></li>
<li><p>Hosts can also be in multiple groups, but there will only be <strong>one</strong> instance of a host at runtime. Ansible merges the data from multiple groups.</p></li>
</ul>
</section>
<section id="adding-ranges-of-hosts">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Adding ranges of hosts</a><a class="headerlink" href="#adding-ranges-of-hosts" title="Link to this heading"></a></h3>
<p>If you have a lot of hosts with a similar pattern, you can add them as a range rather than listing each hostname separately:</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[webservers]
www[01:50].example.com
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">webservers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">www[01:50].example.com</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>You can specify a stride (increments between sequence numbers) when defining a numeric range of hosts:</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[webservers]
www[01:50:2].example.com
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">webservers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">www[01:50:2].example.com</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>The example above would make the subdomains www01, www03, www05, …, www49 match, but not www00, www02, www50 and so on, because the stride (increment) is 2 units each step.</p>
<p>For numeric patterns, leading zeros can be included or removed, as desired. Ranges are inclusive. You can also define alphabetic ranges:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[databases]
db-[a:f].example.com
</pre></div>
</div>
</section>
</section>
<section id="passing-multiple-inventory-sources">
<span id="using-multiple-inventory-sources"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Passing multiple inventory sources</a><a class="headerlink" href="#passing-multiple-inventory-sources" title="Link to this heading"></a></h2>
<p>You can target multiple inventory sources (directories, dynamic inventory scripts
or files supported by inventory plugins) at the same time by giving multiple inventory parameters from the command
line or by configuring <span class="target" id="index-0"></span><a class="reference internal" href="../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ANSIBLE_INVENTORY</span></code></a>. This can be useful when you want to target normally
separate environments, like staging and production, at the same time for a specific action.</p>
<p>To target two inventory sources from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook<span class="w"> </span>get_logs.yml<span class="w"> </span>-i<span class="w"> </span>staging<span class="w"> </span>-i<span class="w"> </span>production
</pre></div>
</div>
</section>
<section id="organizing-inventory-in-a-directory">
<span id="inventory-directory"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">Organizing inventory in a directory</a><a class="headerlink" href="#organizing-inventory-in-a-directory" title="Link to this heading"></a></h2>
<p>You can consolidate multiple inventory sources in a single directory. The simplest version of this is a directory with multiple files instead of a single inventory file. A single file gets difficult to maintain when it gets too long. If you have multiple teams and multiple automation projects, having one inventory file per team or project lets everyone easily find the hosts and groups that matter to them.</p>
<p>You can also combine multiple inventory source types in an inventory directory. This can be useful for combining static and dynamic hosts and managing them as one inventory.
The following inventory directory combines an inventory plugin source, a dynamic inventory script,
and a file with static hosts:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>inventory/
  openstack.yml          # configure inventory plugin to get hosts from OpenStack cloud
  dynamic-inventory.py   # add additional hosts with dynamic inventory script
  on-prem                # add static hosts and groups
  parent-groups          # add static hosts and groups
</pre></div>
</div>
<p>You can target this inventory directory as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook<span class="w"> </span>example.yml<span class="w"> </span>-i<span class="w"> </span>inventory
</pre></div>
</div>
<p>You can also configure the inventory directory in your <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file. See <a class="reference internal" href="../installation_guide/intro_configuration.html#intro-configuration"><span class="std std-ref">Configuring Ansible</span></a> for more details.</p>
<section id="managing-inventory-load-order">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Managing inventory load order</a><a class="headerlink" href="#managing-inventory-load-order" title="Link to this heading"></a></h3>
<p>Ansible loads inventory sources in ASCII order according to the file names. If you define parent groups in one file or directory and child groups in other files or directories, the files that define the child groups must be loaded first. If the parent groups are loaded first, you will see the error <code class="docutils literal notranslate"><span class="pre">Unable</span> <span class="pre">to</span> <span class="pre">parse</span> <span class="pre">/path/to/source_of_parent_groups</span> <span class="pre">as</span> <span class="pre">an</span> <span class="pre">inventory</span> <span class="pre">source</span></code>.</p>
<p>For example, if you have a file called <code class="docutils literal notranslate"><span class="pre">groups-of-groups</span></code> that defines a <code class="docutils literal notranslate"><span class="pre">production</span></code> group with child groups defined in a file called <code class="docutils literal notranslate"><span class="pre">on-prem</span></code>, Ansible cannot parse the <code class="docutils literal notranslate"><span class="pre">production</span></code> group. To avoid this problem, you can control the load order by adding prefixes to the files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>inventory/
  01-openstack.yml          # configure inventory plugin to get hosts from OpenStack cloud
  02-dynamic-inventory.py   # add additional hosts with dynamic inventory script
  03-on-prem                # add static hosts and groups
  04-groups-of-groups       # add parent groups
</pre></div>
</div>
<p>You can find examples of how to organize your inventories and group your hosts in <a class="reference internal" href="#inventory-setup-examples"><span class="std std-ref">Inventory setup examples</span></a>.</p>
</section>
</section>
<section id="adding-variables-to-inventory">
<span id="variables-in-inventory"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink">Adding variables to inventory</a><a class="headerlink" href="#adding-variables-to-inventory" title="Link to this heading"></a></h2>
<p>You can store variable values that relate to a specific host or group in inventory. To start with, you may add variables directly to the hosts and groups in your main inventory file.</p>
<p>We document adding variables in the main inventory file for simplicity. However, storing variables in separate host and group variable files is a more robust approach to describing your system policy. Setting variables in the main inventory file is only a shorthand. See <a class="reference internal" href="#splitting-out-vars"><span class="std std-ref">Organizing host and group variables</span></a> for guidelines on storing variable values in individual files in the ‘host_vars’ directory. See <a class="reference internal" href="#splitting-out-vars"><span class="std std-ref">Organizing host and group variables</span></a> for details.</p>
</section>
<section id="assigning-a-variable-to-one-machine-host-variables">
<span id="host-variables"></span><h2><a class="toc-backref" href="#id13" role="doc-backlink">Assigning a variable to one machine: host variables</a><a class="headerlink" href="#assigning-a-variable-to-one-machine-host-variables" title="Link to this heading"></a></h2>
<p>You can easily assign a variable to a single host and then use it later in playbooks. You can do this directly in your inventory file.</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[atlanta]
host1 http_port=80 maxRequestsPerChild=808
host2 http_port=303 maxRequestsPerChild=909
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">atlanta</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">http_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">      </span><span class="nt">maxRequestsPerChild</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">808</span>
<span class="w">    </span><span class="nt">host2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">http_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">303</span>
<span class="w">      </span><span class="nt">maxRequestsPerChild</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">909</span>
</pre></div>
</div>
<p>Unique values like non-standard SSH ports work well as host variables. You can add them to your Ansible inventory by adding the port number after the hostname with a colon:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>badwolf.example.com:5309
</pre></div>
</div>
<p>Connection variables also work well as host variables:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[targets]

localhost              ansible_connection=local
other1.example.com     ansible_connection=ssh        ansible_user=myuser
other2.example.com     ansible_connection=ssh        ansible_user=myotheruser
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you list non-standard SSH ports in your SSH config file, the <code class="docutils literal notranslate"><span class="pre">openssh</span></code> connection will find and use them, but the <code class="docutils literal notranslate"><span class="pre">paramiko</span></code> connection will not.</p>
</div>
<section id="inventory-aliases">
<span id="id2"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">Inventory aliases</a><a class="headerlink" href="#inventory-aliases" title="Link to this heading"></a></h3>
<p>You can also define aliases in your inventory using host variables:</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jumper ansible_port=5555 ansible_host=192.0.2.50
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">jumper</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ansible_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5555</span>
<span class="w">      </span><span class="nt">ansible_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.2.50</span>
</pre></div>
</div>
<p>In this example, running Ansible against the host alias “jumper” will connect to 192.0.2.50 on port 5555. See <a class="reference internal" href="#behavioral-parameters"><span class="std std-ref">behavioral inventory parameters</span></a> to further customize the connection to hosts.</p>
</section>
</section>
<section id="defining-variables-in-ini-format">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Defining variables in INI format</a><a class="headerlink" href="#defining-variables-in-ini-format" title="Link to this heading"></a></h2>
<p>Values passed in the INI format using the <code class="docutils literal notranslate"><span class="pre">key=value</span></code> syntax are interpreted differently depending on where they are declared:</p>
<ul class="simple">
<li><p>When declared inline with the host, INI values are interpreted as Python literal structures           (strings, numbers, tuples, lists, dicts, booleans, None). Host lines accept multiple <code class="docutils literal notranslate"><span class="pre">key=value</span></code> parameters per line. Therefore they need a way to indicate that a space is part of a value rather than a separator. Values that contain whitespace can be quoted (single or double). See the <a class="reference external" href="https://docs.python.org/3/library/shlex.html#parsing-rules">Python shlex parsing rules</a> for details.</p></li>
<li><p>When declared in a <code class="docutils literal notranslate"><span class="pre">:vars</span></code> section, INI values are interpreted as strings. For example <code class="docutils literal notranslate"><span class="pre">var=FALSE</span></code> would create a string equal to ‘FALSE’. Unlike host lines, <code class="docutils literal notranslate"><span class="pre">:vars</span></code> sections accept only a single entry per line, so everything after the <code class="docutils literal notranslate"><span class="pre">=</span></code> must be the value for the entry.</p></li>
</ul>
<p>If a variable value set in an INI inventory must be a certain type (for example, a string or a boolean value), always specify the type with a filter in your task. Do not rely on types set in INI inventories when consuming variables.</p>
<p>Consider using YAML format for inventory sources to avoid confusion on the actual type of a variable. The YAML inventory plugin processes variable values consistently and correctly.</p>
</section>
<section id="assigning-a-variable-to-many-machines-group-variables">
<span id="group-variables"></span><h2><a class="toc-backref" href="#id16" role="doc-backlink">Assigning a variable to many machines: group variables</a><a class="headerlink" href="#assigning-a-variable-to-many-machines-group-variables" title="Link to this heading"></a></h2>
<p>If all hosts in a group share a variable value, you can apply that variable to an entire group at once.</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[atlanta]
host1
host2

[atlanta:vars]
ntp_server=ntp.atlanta.example.com
proxy=proxy.atlanta.example.com
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">atlanta</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host2</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">ntp_server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ntp.atlanta.example.com</span>
<span class="w">    </span><span class="nt">proxy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy.atlanta.example.com</span>
</pre></div>
</div>
<p>Group variables are a convenient way to apply variables to multiple hosts at once. Before executing, however, Ansible always flattens variables, including inventory variables, to the host level. If a host is a member of multiple groups, Ansible reads variable values from all of those groups. If you assign different values to the same variable in different groups, Ansible chooses which value to use based on internal <a class="reference internal" href="#how-we-merge"><span class="std std-ref">rules for merging</span></a>.</p>
<section id="inheriting-variable-values-group-variables-for-groups-of-groups">
<span id="subgroups"></span><h3><a class="toc-backref" href="#id17" role="doc-backlink">Inheriting variable values: group variables for groups of groups</a><a class="headerlink" href="#inheriting-variable-values-group-variables-for-groups-of-groups" title="Link to this heading"></a></h3>
<p>You can apply variables to parent groups (nested groups or groups of groups) as well as to child groups. The syntax is the same: <code class="docutils literal notranslate"><span class="pre">:vars</span></code> for INI format and <code class="docutils literal notranslate"><span class="pre">vars:</span></code> for YAML format:</p>
<p>In INI:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[atlanta]
host1
host2

[raleigh]
host2
host3

[southeast:children]
atlanta
raleigh

[southeast:vars]
some_server=foo.southeast.example.com
halon_system_timeout=30
self_destruct_countdown=60
escape_pods=2

[usa:children]
southeast
northeast
southwest
northwest
</pre></div>
</div>
<p>In YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">usa</span><span class="p">:</span>
<span class="w">  </span><span class="nt">children</span><span class="p">:</span>
<span class="w">    </span><span class="nt">southeast</span><span class="p">:</span>
<span class="w">      </span><span class="nt">children</span><span class="p">:</span>
<span class="w">        </span><span class="nt">atlanta</span><span class="p">:</span>
<span class="w">          </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host1</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host2</span><span class="p">:</span>
<span class="w">        </span><span class="nt">raleigh</span><span class="p">:</span>
<span class="w">          </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host2</span><span class="p">:</span>
<span class="w">            </span><span class="nt">host3</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">        </span><span class="nt">some_server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.southeast.example.com</span>
<span class="w">        </span><span class="nt">halon_system_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">        </span><span class="nt">self_destruct_countdown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">        </span><span class="nt">escape_pods</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">northeast</span><span class="p">:</span>
<span class="w">    </span><span class="nt">northwest</span><span class="p">:</span>
<span class="w">    </span><span class="nt">southwest</span><span class="p">:</span>
</pre></div>
</div>
<p>A child group’s variables will have higher precedence (override) than a parent group’s variables.</p>
</section>
</section>
<section id="organizing-host-and-group-variables">
<span id="splitting-out-vars"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink">Organizing host and group variables</a><a class="headerlink" href="#organizing-host-and-group-variables" title="Link to this heading"></a></h2>
<p>Although you can store variables in the main inventory file, storing separate host and group variables files may help you organize your variable values more easily. You can also use lists and hash data in host and group variables files, which you cannot do in your main inventory file.</p>
<p>Host and group variable files must use YAML syntax. Valid file extensions include ‘.yml’, ‘.yaml’, ‘.json’, or no file extension. See <a class="reference internal" href="../reference_appendices/YAMLSyntax.html#yaml-syntax"><span class="std std-ref">YAML Syntax</span></a> if you are new to YAML.</p>
<p>Ansible loads host and group variable files by searching paths relative to the inventory file or the playbook file. If your inventory file at <code class="docutils literal notranslate"><span class="pre">/etc/ansible/hosts</span></code> contains a host named ‘foosball’ that belongs to two groups, ‘raleigh’ and ‘webservers’, that host will use variables in YAML files at the following locations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/etc/ansible/group_vars/raleigh<span class="w"> </span><span class="c1"># can optionally end in &#39;.yml&#39;, &#39;.yaml&#39;, or &#39;.json&#39;</span>
/etc/ansible/group_vars/webservers
/etc/ansible/host_vars/foosball
</pre></div>
</div>
<p>For example, if you group hosts in your inventory by datacenter, and each datacenter uses its own NTP server and database server, you can create a file called <code class="docutils literal notranslate"><span class="pre">/etc/ansible/group_vars/raleigh</span></code> to store the variables for the <code class="docutils literal notranslate"><span class="pre">raleigh</span></code> group:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">ntp_server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">acme.example.org</span>
<span class="nt">database_server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.example.org</span>
</pre></div>
</div>
<p>You can also create <em>directories</em> named after your groups or hosts. Ansible will read all the files in these directories in lexicographical order. An example with the ‘raleigh’ group:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/etc/ansible/group_vars/raleigh/db_settings
/etc/ansible/group_vars/raleigh/cluster_settings
</pre></div>
</div>
<p>All hosts in the ‘raleigh’ group will have the variables defined in these files
available to them. This can be very useful to keep your variables organized when a single
file gets too big, or when you want to use <a class="reference internal" href="../vault_guide/vault_using_encrypted_content.html#playbooks-vault"><span class="std std-ref">Ansible Vault</span></a> on some group variables.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">ansible-playbook</span></code> you can also add <code class="docutils literal notranslate"><span class="pre">group_vars/</span></code> and <code class="docutils literal notranslate"><span class="pre">host_vars/</span></code> directories to your playbook directory. Other Ansible commands (for example, <code class="docutils literal notranslate"><span class="pre">ansible</span></code>, <code class="docutils literal notranslate"><span class="pre">ansible-console</span></code>, and so on) will only look for <code class="docutils literal notranslate"><span class="pre">group_vars/</span></code> and <code class="docutils literal notranslate"><span class="pre">host_vars/</span></code> in the inventory directory. If you want other commands to load group and host variables from a playbook directory, you must provide the <code class="docutils literal notranslate"><span class="pre">--playbook-dir</span></code> option on the command line.
If you load inventory files from both the playbook directory and the inventory directory, variables in the playbook directory will override variables set in the inventory directory.</p>
<p>Keeping your inventory file and variables in a git repo (or other version control)
is an excellent way to track changes to your inventory and host variables.</p>
</section>
<section id="how-variables-are-merged">
<span id="how-we-merge"></span><h2><a class="toc-backref" href="#id19" role="doc-backlink">How variables are merged</a><a class="headerlink" href="#how-variables-are-merged" title="Link to this heading"></a></h2>
<p>By default, variables are merged/flattened to the specific host before a play is run. This keeps Ansible focused on the Host and Task, so groups do not survive outside of inventory and host matching. By default, Ansible overwrites variables including the ones defined for a group and/or host (see <a class="reference internal" href="../reference_appendices/config.html#default-hash-behaviour"><span class="std std-ref">DEFAULT_HASH_BEHAVIOUR</span></a>). The order/precedence is (from lowest to highest):</p>
<ul class="simple">
<li><p>all group (because it is the ‘parent’ of all other groups)</p></li>
<li><p>parent group</p></li>
<li><p>child group</p></li>
<li><p>host</p></li>
</ul>
<p>By default, Ansible merges groups at the same parent/child level in ASCII order, and variables from the last group loaded overwrite variables from the previous groups. For example, an <code class="docutils literal notranslate"><span class="pre">a_group</span></code> will be merged with <code class="docutils literal notranslate"><span class="pre">b_group</span></code> and <code class="docutils literal notranslate"><span class="pre">b_group</span></code> vars that match will overwrite the ones in <code class="docutils literal notranslate"><span class="pre">a_group</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ansible merges variables from different sources and applies precedence to some variables over others according to a set of rules. For example, variables that occur higher in an inventory can override variables that occur lower in the inventory. See <a class="reference internal" href="../playbook_guide/playbooks_variables.html#ansible-variable-precedence"><span class="std std-ref">Variable precedence: Where should I put a variable?</span></a> for more information.</p>
</div>
<p>You can change this behavior by setting the group variable <code class="docutils literal notranslate"><span class="pre">ansible_group_priority</span></code> to change the merge order for groups of the same level (after the parent/child order is resolved). The larger the number, the later it will be merged, giving it higher priority. This variable defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code> if not set. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">a_group</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">testvar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a</span>
<span class="w">    </span><span class="nt">ansible_group_priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">b_group</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">    </span><span class="nt">testvar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b</span>
</pre></div>
</div>
<p>In this example, if both groups have the same priority, the result would normally have been <code class="docutils literal notranslate"><span class="pre">testvar</span> <span class="pre">==</span> <span class="pre">b</span></code>, but since we are giving the <code class="docutils literal notranslate"><span class="pre">a_group</span></code> a higher priority the result will be <code class="docutils literal notranslate"><span class="pre">testvar</span> <span class="pre">==</span> <span class="pre">a</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">ansible_group_priority</span></code> can only be set in the inventory source and not in group_vars/, as the variable is used in the loading of group_vars.</p>
</div>
<section id="managing-inventory-variable-load-order">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Managing inventory variable load order</a><a class="headerlink" href="#managing-inventory-variable-load-order" title="Link to this heading"></a></h3>
<p>When using multiple inventory sources, keep in mind that any variable conflicts are resolved according
to the rules described in <a class="reference internal" href="#how-we-merge"><span class="std std-ref">How variables are merged</span></a> and <a class="reference internal" href="../playbook_guide/playbooks_variables.html#ansible-variable-precedence"><span class="std std-ref">Variable precedence: Where should I put a variable?</span></a>. You can control the merging order of variables in inventory sources to get the variable value you need.</p>
<p>When you pass multiple inventory sources at the command line, Ansible merges variables in the order you pass those parameters. If <code class="docutils literal notranslate"><span class="pre">[all:vars]</span></code> in staging inventory defines <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">1</span></code> and production inventory defines <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">2</span></code>, then:</p>
<ul class="simple">
<li><p>Pass  <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">staging</span> <span class="pre">-i</span> <span class="pre">production</span></code> to run the playbook with <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">2</span></code>.</p></li>
<li><p>Pass <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">production</span> <span class="pre">-i</span> <span class="pre">staging</span></code> to run the playbook with <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">1</span></code>.</p></li>
</ul>
<p>When you put multiple inventory sources in a directory, Ansible merges them in ASCII order according to the file names. You can control the load order by adding prefixes to the files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>inventory/
  01-openstack.yml          # configure inventory plugin to get hosts from Openstack cloud
  02-dynamic-inventory.py   # add additional hosts with dynamic inventory script
  03-static-inventory       # add static hosts
  group_vars/
    all.yml                 # assign variables to all hosts
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">01-openstack.yml</span></code> defines <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">1</span></code> for the group <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">02-dynamic-inventory.py</span></code> defines <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">2</span></code>,
and <code class="docutils literal notranslate"><span class="pre">03-static-inventory</span></code> defines <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">3</span></code>, the playbook will be run with <code class="docutils literal notranslate"><span class="pre">myvar</span> <span class="pre">=</span> <span class="pre">3</span></code>.</p>
<p>For more details on inventory plugins and dynamic inventory scripts see <a class="reference internal" href="../plugins/inventory.html#inventory-plugins"><span class="std std-ref">Inventory plugins</span></a> and <a class="reference internal" href="intro_dynamic_inventory.html#intro-dynamic-inventory"><span class="std std-ref">Working with dynamic inventory</span></a>.</p>
</section>
</section>
<section id="connecting-to-hosts-behavioral-inventory-parameters">
<span id="behavioral-parameters"></span><h2><a class="toc-backref" href="#id21" role="doc-backlink">Connecting to hosts: behavioral inventory parameters</a><a class="headerlink" href="#connecting-to-hosts-behavioral-inventory-parameters" title="Link to this heading"></a></h2>
<p>As described above, setting the following variables controls how Ansible interacts with remote hosts.</p>
<p>Host connection:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ansible does not expose a channel to allow communication between the user and the ssh process to accept a password manually to decrypt an ssh key when using the ssh connection plugin (which is the default). The use of <code class="docutils literal notranslate"><span class="pre">ssh-agent</span></code> is highly recommended.</p>
</div>
<dl class="simple">
<dt>ansible_connection</dt><dd><p>Connection type to the host. This can be the name of any Ansible connection plugin. SSH protocol types are <code class="docutils literal notranslate"><span class="pre">ssh</span></code> or <code class="docutils literal notranslate"><span class="pre">paramiko</span></code>. The default is <code class="docutils literal notranslate"><span class="pre">ssh</span></code>.</p>
</dd>
</dl>
<p>General for all connections:</p>
<dl class="simple">
<dt>ansible_host</dt><dd><p>The name of the host to connect to, if different from the alias you wish to give to it. Never set it to depend on <code class="docutils literal notranslate"><span class="pre">inventory_hostname</span></code> if you use delegation.</p>
</dd>
<dt>ansible_port</dt><dd><p>The connection port number, if not the default (22 for ssh)</p>
</dd>
<dt>ansible_user</dt><dd><p>The username to use when connecting to the host</p>
</dd>
<dt>ansible_password</dt><dd><p>The password to use to authenticate to the host (never store this variable in plain text; always use a vault. See <a class="reference internal" href="../tips_tricks/ansible_tips_tricks.html#tip-for-variables-and-vaults"><span class="std std-ref">Keep vaulted variables safely visible</span></a>)</p>
</dd>
</dl>
<p>Specific to the SSH connection:</p>
<dl class="simple">
<dt>ansible_ssh_private_key_file</dt><dd><p>Private key file used by SSH. Useful if using multiple keys and you do not want to use SSH agent.</p>
</dd>
<dt>ansible_ssh_common_args</dt><dd><p>This setting is always appended to the default command line for <strong class="command">sftp</strong>, <strong class="command">scp</strong>,
and <strong class="command">ssh</strong>. Useful to configure a <code class="docutils literal notranslate"><span class="pre">ProxyCommand</span></code> for a certain host (or
group).</p>
</dd>
<dt>ansible_sftp_extra_args</dt><dd><p>This setting is always appended to the default <strong class="command">sftp</strong> command line.</p>
</dd>
<dt>ansible_scp_extra_args</dt><dd><p>This setting is always appended to the default <strong class="command">scp</strong> command line.</p>
</dd>
<dt>ansible_ssh_extra_args</dt><dd><p>This setting is always appended to the default <strong class="command">ssh</strong> command line.</p>
</dd>
<dt>ansible_ssh_pipelining</dt><dd><p>Determines whether or not to use SSH pipelining. This can override the <code class="docutils literal notranslate"><span class="pre">pipelining</span></code> setting in <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code>.</p>
</dd>
<dt>ansible_ssh_executable (added in version 2.2)</dt><dd><p>This setting overrides the default behavior to use the system <strong class="command">ssh</strong>. This can override the <code class="docutils literal notranslate"><span class="pre">ssh_executable</span></code> setting in <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> under <code class="docutils literal notranslate"><span class="pre">ssh_connection</span></code>.</p>
</dd>
</dl>
<p>Privilege escalation (see <a class="reference internal" href="../playbook_guide/playbooks_privilege_escalation.html#become"><span class="std std-ref">Ansible Privilege Escalation</span></a> for further details):</p>
<dl class="simple">
<dt>ansible_become</dt><dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">ansible_sudo</span></code> or <code class="docutils literal notranslate"><span class="pre">ansible_su</span></code>, allows to force privilege escalation</p>
</dd>
<dt>ansible_become_method</dt><dd><p>Allows to set privilege escalation method</p>
</dd>
<dt>ansible_become_user</dt><dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">ansible_sudo_user</span></code> or <code class="docutils literal notranslate"><span class="pre">ansible_su_user</span></code>, allows you to set the user you become through privilege escalation</p>
</dd>
<dt>ansible_become_password</dt><dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">ansible_sudo_password</span></code> or <code class="docutils literal notranslate"><span class="pre">ansible_su_password</span></code>, allows you to set the privilege escalation password (never store this variable in plain text; always use a vault. See <a class="reference internal" href="../tips_tricks/ansible_tips_tricks.html#tip-for-variables-and-vaults"><span class="std std-ref">Keep vaulted variables safely visible</span></a>)</p>
</dd>
<dt>ansible_become_exe</dt><dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">ansible_sudo_exe</span></code> or <code class="docutils literal notranslate"><span class="pre">ansible_su_exe</span></code>, allows you to set the executable for the escalation method selected</p>
</dd>
<dt>ansible_become_flags</dt><dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">ansible_sudo_flags</span></code> or <code class="docutils literal notranslate"><span class="pre">ansible_su_flags</span></code>, allows you to set the flags passed to the selected escalation method. This can be also set globally in <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> in the <code class="docutils literal notranslate"><span class="pre">become_flags</span></code> option under <code class="docutils literal notranslate"><span class="pre">privilege_escalation</span></code>.</p>
</dd>
</dl>
<p>Remote host environment parameters:</p>
<dl class="simple" id="ansible-shell-type">
<dt>ansible_shell_type</dt><dd><p>The shell type of the target system. You should not use this setting unless you have set the
<a class="reference internal" href="#ansible-shell-executable"><span class="std std-ref">ansible_shell_executable</span></a> to a non-Bourne (sh) compatible shell.  By default, commands are
formatted using <code class="docutils literal notranslate"><span class="pre">sh</span></code>-style syntax.  Setting this to <code class="docutils literal notranslate"><span class="pre">csh</span></code> or <code class="docutils literal notranslate"><span class="pre">fish</span></code> will cause commands
executed on target systems to follow those shell’s syntax instead.</p>
</dd>
</dl>
<dl class="simple" id="ansible-python-interpreter">
<dt>ansible_python_interpreter</dt><dd><p>The target host Python path. This is useful for systems with more
than one Python or not located at <strong class="command">/usr/bin/python</strong> such as *BSD, or where <strong class="command">/usr/bin/python</strong>
is not a 2.X series Python.  We do not use the <strong class="command">/usr/bin/env</strong> mechanism as that requires the remote user’s
path to be set right and also assumes the <strong class="program">python</strong> executable is named python, where the executable might
be named something like <strong class="program">python2.6</strong>.</p>
</dd>
<dt>ansible_*_interpreter</dt><dd><p>Works for anything such as ruby or perl and works just like <a class="reference internal" href="#ansible-python-interpreter"><span class="std std-ref">ansible_python_interpreter</span></a>.
This replaces shebang of modules that will run on that host.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.</span></p>
</div>
<dl class="simple" id="ansible-shell-executable">
<dt>ansible_shell_executable</dt><dd><p>This sets the shell the ansible control node will use on the target machine,
overrides <code class="docutils literal notranslate"><span class="pre">executable</span></code> in <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> which defaults to
<strong class="command">/bin/sh</strong>.  You should only change this value if it is not possible
to use <strong class="command">/bin/sh</strong> (in other words, if <strong class="command">/bin/sh</strong> is not installed on the target
machine or cannot be run from sudo.).</p>
</dd>
</dl>
<p>Examples from an Ansible-INI host file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>some_host         ansible_port=2222     ansible_user=manager
aws_host          ansible_ssh_private_key_file=/home/example/.ssh/aws.pem
freebsd_host      ansible_python_interpreter=/usr/local/bin/python
ruby_module_host  ansible_ruby_interpreter=/usr/bin/ruby.1.9.3
</pre></div>
</div>
<section id="non-ssh-connection-types">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Non-SSH connection types</a><a class="headerlink" href="#non-ssh-connection-types" title="Link to this heading"></a></h3>
<p>As stated in the previous section, Ansible executes playbooks over SSH but it is not limited to this connection type.
With the host-specific parameter <code class="docutils literal notranslate"><span class="pre">ansible_connection=&lt;connector&gt;</span></code>, the connection type can be changed.
For a full list with available plugins and examples, see <a class="reference internal" href="../plugins/connection.html#connection-plugin-list"><span class="std std-ref">Plugin list</span></a>.</p>
</section>
</section>
<section id="inventory-setup-examples">
<span id="id3"></span><h2><a class="toc-backref" href="#id23" role="doc-backlink">Inventory setup examples</a><a class="headerlink" href="#inventory-setup-examples" title="Link to this heading"></a></h2>
<p>See also <a class="reference internal" href="../tips_tricks/sample_setup.html#sample-setup"><span class="std std-ref">Sample Ansible setup</span></a>, which shows inventory along with playbooks and other Ansible artifacts.</p>
<section id="example-one-inventory-per-environment">
<span id="inventory-setup-per-environment"></span><h3><a class="toc-backref" href="#id24" role="doc-backlink">Example: One inventory per environment</a><a class="headerlink" href="#example-one-inventory-per-environment" title="Link to this heading"></a></h3>
<p>If you need to manage multiple environments it is sometimes prudent to
have only hosts of a single environment defined per inventory. This
way, it is harder to, for example, accidentally change the state of
nodes inside the “test” environment when you wanted to update
some “staging” servers.</p>
<p>For the example mentioned above you could have an
<code class="file docutils literal notranslate"><span class="pre">inventory_test</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dbservers]</span>
<span class="na">db01.test.example.com</span>
<span class="na">db02.test.example.com</span>

<span class="k">[appservers]</span>
<span class="na">app01.test.example.com</span>
<span class="na">app02.test.example.com</span>
<span class="na">app03.test.example.com</span>
</pre></div>
</div>
<p>That file only includes hosts that are part of the “test”
environment. Define the “staging” machines in another file
called <code class="file docutils literal notranslate"><span class="pre">inventory_staging</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dbservers]</span>
<span class="na">db01.staging.example.com</span>
<span class="na">db02.staging.example.com</span>

<span class="k">[appservers]</span>
<span class="na">app01.staging.example.com</span>
<span class="na">app02.staging.example.com</span>
<span class="na">app03.staging.example.com</span>
</pre></div>
</div>
<p>To apply a playbook called <code class="file docutils literal notranslate"><span class="pre">site.yml</span></code>
to all the app servers in the test environment, use the
following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>inventory_test<span class="w"> </span>-l<span class="w"> </span>appservers<span class="w"> </span>site.yml
</pre></div>
</div>
</section>
<section id="example-group-by-function">
<span id="inventory-setup-per-function"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink">Example: Group by function</a><a class="headerlink" href="#example-group-by-function" title="Link to this heading"></a></h3>
<p>In the previous section, you already saw an example of using groups in
order to cluster hosts that have the same function. This allows you,
for example, to define firewall rules inside a playbook or role
affecting only database servers:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dbservers</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow access from 10.0.0.1</span>
<span class="w">    </span><span class="nt">ansible.builtin.iptables</span><span class="p">:</span>
<span class="w">      </span><span class="nt">chain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INPUT</span>
<span class="w">      </span><span class="nt">jump</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ACCEPT</span>
<span class="w">      </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.1</span>
</pre></div>
</div>
</section>
<section id="example-group-by-location">
<span id="inventory-setup-per-location"></span><h3><a class="toc-backref" href="#id26" role="doc-backlink">Example: Group by location</a><a class="headerlink" href="#example-group-by-location" title="Link to this heading"></a></h3>
<p>Other tasks might be focused on where a certain host is located. Let’s
say that <code class="docutils literal notranslate"><span class="pre">db01.test.example.com</span></code> and <code class="docutils literal notranslate"><span class="pre">app01.test.example.com</span></code> are
located in DC1 while <code class="docutils literal notranslate"><span class="pre">db02.test.example.com</span></code> is in DC2:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dc1]</span>
<span class="na">db01.test.example.com</span>
<span class="na">app01.test.example.com</span>

<span class="k">[dc2]</span>
<span class="na">db02.test.example.com</span>
</pre></div>
</div>
<p>In practice, you might even end up mixing all these setups as you
might need to, on one day, update all nodes in a specific data center
while, on another day, update all the application servers no matter
their location.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../plugins/inventory.html#inventory-plugins"><span class="std std-ref">Inventory plugins</span></a></dt><dd><p>Pulling inventory from dynamic or static sources</p>
</dd>
<dt><a class="reference internal" href="intro_dynamic_inventory.html#intro-dynamic-inventory"><span class="std std-ref">Working with dynamic inventory</span></a></dt><dd><p>Pulling inventory from dynamic sources, such as cloud providers</p>
</dd>
<dt><a class="reference internal" href="../command_guide/intro_adhoc.html#intro-adhoc"><span class="std std-ref">Introduction to ad hoc commands</span></a></dt><dd><p>Examples of basic commands</p>
</dd>
<dt><a class="reference internal" href="../playbook_guide/playbooks.html#working-with-playbooks"><span class="std std-ref">Working with playbooks</span></a></dt><dd><p>Learning Ansible’s configuration, deployment, and orchestration language.</p>
</dd>
<dt><a class="reference external" href="https://groups.google.com/group/ansible-project">Mailing List</a></dt><dd><p>Questions? Help? Ideas?  Stop by the list on Google Groups</p>
</dd>
<dt><a class="reference internal" href="../community/communication.html#communication-irc"><span class="std std-ref">Real-time chat</span></a></dt><dd><p>How to join Ansible chat channels</p>
</dd>
</dl>
</div>
</section>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Building Ansible inventories" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="intro_dynamic_inventory.html" class="btn btn-neutral float-right" title="Working with dynamic inventory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible project contributors.
      <span class="lastupdated">Last updated on Jun 13, 2024.
      </span></p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->
<!-- begin analytics -->
<script>
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script>
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>